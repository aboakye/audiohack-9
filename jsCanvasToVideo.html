<html>

<script src="wavesurfer.min.js"></script>

<!-- <script src="//connect.soundcloud.com/sdk.js"></script> -->

<!-- AUDIO SNIPPET -->
<script type="text/javascript">
	 
	function pullMP3(episode){

		musicStream = function(url){
			var xmlhttp = new XMLHttpRequest();

		      	xmlhttp.onreadystatechange = function(){
			      	if (xmlhttp.readyState == 4 && xmlhttp.status==0){
			      		// callback(xmlhttp.responseText);
			      		//document.getElementById("ios_message").value
			      		var header = xmlhttp.getResponseHeader;
			      		var responseText = header.responseText;
			      	}
		      	};

		    //TODO: SECURITY UPDATE
		    // Make this calling behavior secret : Maybe add it to a python class
	      	xmlhttp.open("GET",url,true);
	      	xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
	      	xmlhttp.send();
		 }

		 musicStream("http://hackathon.thisamericanlife.org/api/episodes/"+episode);
	}


</script>

<!-- WAVEFORM -->
<script type="text/javascript">
	// document.addEventListener("DOMContentLoaded", function(

	// var data = [];

document.addEventListener('DOMContentLoaded', function () {
	// var data = [];

	// var waveform = new Waveform({
	//   container: document.getElementById("example4"),
	//   interpolate: false
	// });
	// var ctx = waveform.context;

	// var gradient = ctx.createLinearGradient(0, 0, 0, waveform.height);
	// gradient.addColorStop(0.0, "green");
	// gradient.addColorStop(1.0, "blue");
	// waveform.innerColor = gradient;

	// var i=0;
	// setInterval(function(){
	//   data.push(Math.cos(i++/25) - 0.2 + Math.random()*0.3);
	//   waveform.update({
	//     data: data
	//   });
	//   console.log('hi');
	// }, 50);


	var wavesurfer = Object.create(WaveSurfer);

	wavesurfer.init({
	    container: document.querySelector('#wave'),
	    waveColor: 'violet',
	    progressColor: 'purple'
	});

	wavesurfer.on('ready', function () {
	    wavesurfer.play();
	    console.log('hi');
	});

	wavesurfer.load('serial-s01-e01.mp3');
});


</script>


<body>



<p>Episode Number:</p>
	<div class="same_line">
		<button onclick="pullMP3(500)">Send Notification</button>
	</div>

<script>
function myFunction() {
    document.getElementById("frm1").submit();
}
</script>

<div id="wave">
</div>


</body>
</html>
